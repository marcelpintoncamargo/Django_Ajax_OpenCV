<!DOCTYPE html>
<html>
{% load static %}

<head>
    <title>Slider Image 01</title>
    <link rel="icon" href="{% static '../media/paw_color02_inverse.jpg' %}" > 
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!--Scroll bar-->
    <link rel="stylesheet" type="text/css" href="{% static 'styles/scroll_bar.css' %}">  
    <!--JQuery Javascript-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script src="https://apis.google.com/js/client.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

    <!-- Font Awesome icons !!!-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"/>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:700,300"/>

</head>

<body>

<h2 align=center>Auto Video Stream to Still Image</h2>

<video  id="myVideo" width="400" height="300" style="border: 1px solid #ddd;"></video>
<canvas id="myCanvas" width="160" height="140" style="border: 1px solid #ddd;"></canvas><br>

<input type=button value="get Video" onclick="{getVideo()}">
<input type=button value="get Pic" onclick="{takeSnapshot()}"><br>
Take snapshot every <input type=number id="myInterval"  value="3000"> milliseconds
<input type=button value="Auto" onclick="{takeAuto()}">


</body>

<script>

var myVideoStream = document.getElementById('myVideo')     // make it a global variable
  var myStoredInterval = 0
  
function getVideo(){
  navigator.getMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia;
  navigator.getMedia({video: true, audio: false},
                     
    function(stream) {
      myVideoStream.srcObject = stream   
      myVideoStream.play();
  }, 
                     
   function(error) {
     alert('webcam not working');
  });
}
  
function takeSnapshot() {
   var myCanvasElement = document.getElementById('myCanvas');
   var myCTX = myCanvasElement.getContext('2d');
   myCTX.drawImage(myVideoStream, 0, 0, myCanvasElement.width, myCanvasElement.height);
}
  
function takeAuto() {
    takeSnapshot() // get snapshot right away then wait and repeat
    clearInterval(myStoredInterval)
    myStoredInterval = setInterval(function(){                                                                                         
       takeSnapshot()
   }, document.getElementById('myInterval').value);        
}
  


</script>


</html>